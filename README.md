Для реализации системы настроек пользователя  выделены следующие слои и
абстракции:

1.  **Слой представления** - отвечает за взаимодействие с пользователем и отображение пользовательского интерфейса в проекте для примера использован swagger api. 
Для примера реализована регистрация пользователей, авторизация, разлогирование. 
Для примера используется контроллер UserSettingsController, который содержит методы:

- send - отправляет подтверждение на указанный метод.

- confirm - бновляет настройки пользователя и подтверждает смену настройки пользователя.

2. **Слой приложения** - отвечает за бизнес-логику приложения, включая обработку данных и логику приложения. Для примера используется сервис UserSettingsService, который содержит методы:

- updateSetting - отправляет подтверждение пользователю по выбранному методу (SMS, email, Telegram).

- confirmSetting - обновляет настройки пользователя, проверяет код подтверждения.

- EmailConfirmationService(в проекте для примера реализована отправка кода подтверждения по email), SmsConfirmationService, TelegramConfirmationService - классы для каждого метода подтверждения реализующие интерфейс ConfirmationServiceInterface.

3. **Слой инфраструктуры** - отвечает за взаимодействие с базой данных и хранение данных. Здесь используются таблицы:

- users - содержит информацию о зарегистрированных пользователях.

- user_settings - содержит информацию о настройках каждого пользователя.

- confirmations - содержит информацию о подтверждениях смены настройки пользователя.

- UserSetting - модель настройки пользователя, содержащая информацию о пользователе, настройке и ее значении.

- Confirmation - модель подтверждения смены настройки, содержащая информацию о коде подтверждения, методе подтверждения и времени создания.

- User - модель зарегестрированных пользователей.

4. **Абстракции:**

- ConfirmationServiceInterface - интерфейс сервиса для отправки подтверждений пользователю по различным методам (SMS, email, Telegram).

- ConfirmationServiceFactory - фабрика для создания сервиса подтверждения по выбранному методу (SMS, email, Telegram).

- ConfirmationValidationInterface - интерфейс для проверки подтверждения по коду и методу.

